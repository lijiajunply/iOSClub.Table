@using iOSClub.Share.Data

<Row OnBreakpoint="OnBreakpoint"/>

<div class="header-box">
    <h1 class="logo">XAUAT iOS Club</h1>
    @if (_isMobile)
    {
        <Icon Type="menu" OnClick="@open" Theme="outline" Style="color: #f3f5f7"/>
    }
    else
    {
        <nav class="navbar-expand">
            <ul class="nav-menu">
                @foreach (var item in NavLists)
                {
                    <NavLink class="header-nav-item" href="@item.Url" Match="NavLinkMatch.All">@item.Name</NavLink>
                }
            </ul>
        </nav>
    }
</div>

@if (_isMobile)
{
    <Drawer MaskClosable="true" Visible="visible" Closable="false" OnClose="@close" Width="160" Placement="right">
        <Menu Mode="@MenuMode.Vertical" Style="width: 140px">
            <MenuItemGroup>
                <TitleTemplate>
                    @Title
                    <Divider/>
                </TitleTemplate>
                <ChildContent>
                    @foreach (var item in NavLists)
                    {
                        <MenuItem OnClick="@close" RouterLink="@item.Url" RouterMatch="NavLinkMatch.All">
                            @if (!string.IsNullOrEmpty(item.Icon))
                            {
                                <Icon Type="@item.Icon"/>
                            }
                            @item.Name
                        </MenuItem>
                    }
                </ChildContent>
            </MenuItemGroup>
        </Menu>
    </Drawer>
}


@code {

    private void OnBreakpoint(BreakpointType breakpoint)
    {
        _isMobile = breakpoint.IsIn(BreakpointType.Sm, BreakpointType.Xs, BreakpointType.Md);
        StateHasChanged();
    }

    private bool _isMobile;

    [Parameter] public List<NavModel> NavLists { get; set; } = [];
    [Parameter] public string Title { get; set; } = "西建大iOS Club";
    bool visible = false;

    void open()
    {
        visible = true;
    }

    void close() => visible = false;

}

<style>
    .header-nav-item {
        font-size: 18px;
        color: #f5f5f7;
        align-items: center;
        justify-content: space-between;
    }
    
    .header-nav-item:hover {
        text-decoration: underline;
    }
    
    .header-box {
        margin-left: 10px;
        margin-right: 10px;
        padding-left: 10px;
        padding-right: 10px;
        color: #333;
        border-radius: 10px;
        /* 添加圆角 */
        overflow: hidden;
        /* 防止子元素超出边界 */
        display: flex;
        scroll-snap-align: end;
        align-items: center;
        justify-content: space-between;
        text-align: center;
        background: rgba(255, 255, 255, 0.3);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        box-shadow: inset 0 0 6px rgba(255, 255, 255, 0.3);
    }
</style>